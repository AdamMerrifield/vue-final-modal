function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}// Older browsers don't support event options, feature detect it.
// Adopted and modified solution from Bohdan Didukh (2017)
// https://stackoverflow.com/questions/41594997/ios-10-safari-prevent-scrolling-behind-a-fixed-overlay-and-maintain-scroll-posi
var hasPassiveEvents=!1;if("undefined"!=typeof window){var passiveTestOptions={get passive(){hasPassiveEvents=!0}};window.addEventListener("testPassive",null,passiveTestOptions),window.removeEventListener("testPassive",null,passiveTestOptions)}var isIosDevice="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints),locks=[],documentListenerAdded=!1,initialClientY=-1,previousBodyOverflowSetting=void 0,previousBodyPaddingRight=void 0,allowTouchMove=function(a){return locks.some(function(b){return!!(b.options.allowTouchMove&&b.options.allowTouchMove(a))})},preventDefault=function(a){var b=a||window.event;// For the case whereby consumers adds a touchmove event listener to document.
// Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })
// in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then
// the touchmove event on document will break.
return!!allowTouchMove(b.target)||!!(1<b.touches.length)||(b.preventDefault&&b.preventDefault(),!1);// Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).
},setOverflowHidden=function(a){// Setting overflow on body/documentElement synchronously in Desktop Safari slows down
// the responsiveness for some reason. Setting within a setTimeout fixes this.
setTimeout(function(){// If previousBodyPaddingRight is already set, don't set it again.
if(previousBodyPaddingRight===void 0){var b=!!a&&!0===a.reserveScrollBarGap,c=window.innerWidth-document.documentElement.clientWidth;b&&0<c&&(previousBodyPaddingRight=document.body.style.paddingRight,document.body.style.paddingRight=c+"px")}// If previousBodyOverflowSetting is already set, don't set it again.
previousBodyOverflowSetting===void 0&&(previousBodyOverflowSetting=document.body.style.overflow,document.body.style.overflow="hidden")})},restoreOverflowSetting=function(){// Setting overflow on body/documentElement synchronously in Desktop Safari slows down
// the responsiveness for some reason. Setting within a setTimeout fixes this.
setTimeout(function(){previousBodyPaddingRight!==void 0&&(document.body.style.paddingRight=previousBodyPaddingRight,previousBodyPaddingRight=void 0),previousBodyOverflowSetting!==void 0&&(document.body.style.overflow=previousBodyOverflowSetting,previousBodyOverflowSetting=void 0)})},isTargetElementTotallyScrolled=function(a){return!!a&&a.scrollHeight-a.scrollTop<=a.clientHeight},handleScroll=function(a,b){var c=a.targetTouches[0].clientY-initialClientY;return!allowTouchMove(a.target)&&(b&&0===b.scrollTop&&0<c?preventDefault(a):isTargetElementTotallyScrolled(b)&&0>c?preventDefault(a):(a.stopPropagation(),!0))},disableBodyScroll=function(a,b){if(isIosDevice){// targetElement must be provided, and disableBodyScroll must not have been
// called on this targetElement before.
if(!a)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(a&&!locks.some(function(b){return b.targetElement===a})){locks=[].concat(_toConsumableArray(locks),[{targetElement:a,options:b||{}}]),a.ontouchstart=function(a){1===a.targetTouches.length&&(initialClientY=a.targetTouches[0].clientY)},a.ontouchmove=function(b){1===b.targetTouches.length&&handleScroll(b,a)},documentListenerAdded||(document.addEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:!1}:void 0),documentListenerAdded=!0)}}else{setOverflowHidden(b);locks=[].concat(_toConsumableArray(locks),[{targetElement:a,options:b||{}}])}},clearAllBodyScrollLocks=function(){isIosDevice?(locks.forEach(function(a){a.targetElement.ontouchstart=null,a.targetElement.ontouchmove=null}),documentListenerAdded&&(document.removeEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:!1}:void 0),documentListenerAdded=!1),locks=[],initialClientY=-1):(restoreOverflowSetting(),locks=[])};//
let modalStack=[];const TransitionState={Enter:"enter",Entering:"entering",Leave:"leave",Leaving:"leavng"};var script={name:"VueFinalModal",props:{value:{type:Boolean,default:!1},ssr:{type:Boolean,default:!1},classes:{type:[String,Object,Array],default:""},contentClass:{type:[String,Object,Array],default:""},lockScroll:{type:Boolean,default:!0},hideOverlay:{type:Boolean,default:!1},clickToClose:{type:Boolean,default:!0},preventClick:{type:Boolean,default:!1},overlayClass:{type:String,default:""},attach:{type:null,default:"body"},transition:{type:String,default:"vfm"},overlayTransition:{type:String,default:"vfm"},zIndex:{type:[String,Number],default:1e3}},data:()=>({visible:!1,visibility:{modal:!1,overlay:!1},overlayTransitionState:null,modalTransitionState:null}),computed:{isComponentReadyToBeDestroyed(){return this.overlayTransitionState===TransitionState.Leave&&this.modalTransitionState===TransitionState.Leave}},watch:{value(a){this.mounted(a),!1===a&&this.close()},lockScroll:"handleLockScroll",hideOverlay(a){this.value&&!a&&this.appendOverlay()},attach(){this.mounted(this.value)},isComponentReadyToBeDestroyed(a){a&&(this.visible=!1)}},created(){setTimeout(()=>{this.mounted(this.value)})},beforeDestroy(){this.close()},methods:{mounted(a){if(a){let a=this.getAttachElement();if(a){a.appendChild(this.$el);let b=modalStack.findIndex(a=>a===this);-1!==b&&modalStack.splice(b,1),modalStack.push(this),this.handleLockScroll(),modalStack.filter(a=>a!==this).forEach(b=>{b.getAttachElement()===a&&(b.visibility.overlay=!1)})}else if(!1!==a)return void console.warn("Unable to locate target ".concat(this.attach||"body"));this.visible=!0,this.$nextTick(()=>{this.startTransitionEnter()})}else this.lockScroll&&clearAllBodyScrollLocks()},close(){let a=modalStack.findIndex(a=>a===this);if(-1!==a&&modalStack.splice(a,1),0<modalStack.length){// If there are still nested modals opened
const a=modalStack[modalStack.length-1];a.handleLockScroll(),a.hideOverlay||a.appendOverlay()}else// If the closed modal is the last one
this.lockScroll&&clearAllBodyScrollLocks();this.startTransitionLeave()},startTransitionEnter(){this.visibility.overlay=!0,this.visibility.modal=!0},startTransitionLeave(){this.visibility.overlay=!1,this.visibility.modal=!1},appendOverlay(){this.visibility.overlay=!0},handleLockScroll(){this.lockScroll?disableBodyScroll(this.$refs.vfmContent):clearAllBodyScrollLocks()},getAttachElement(){let a;return a=!1!==this.attach&&("string"==typeof this.attach?!!window&&window.document.querySelector(this.attach):this.attach),a},beforeOverlayEnter(){this.overlayTransitionState=TransitionState.Entering},afterOverlayEnter(){this.overlayTransitionState=TransitionState.Enter},beforeOverlayLeave(){this.overlayTransitionState=TransitionState.Leaving},afterOverlayLeave(){this.overlayTransitionState=TransitionState.Leave},beforeModalEnter(){this.$emit("before-open"),this.modalTransitionState=TransitionState.Entering},afterModalEnter(){this.modalTransitionState=TransitionState.Enter,this.$emit("opened")},beforeModalLeave(){this.$emit("before-close"),this.modalTransitionState=TransitionState.Leaving},afterModalLeave(){this.modalTransitionState=TransitionState.Leave,this.$emit("closed")}}};function normalizeComponent(a,b,c,d,e,f/* server only */,g,h,i,j){"boolean"!=typeof g&&(i=h,h=g,g=!1);// Vue.extend constructor export interop.
const k="function"==typeof c?c.options:c;// render functions
a&&a.render&&(k.render=a.render,k.staticRenderFns=a.staticRenderFns,k._compiled=!0,e&&(k.functional=!0)),d&&(k._scopeId=d);let l;if(f?(l=function(a){a=a||// cached call
this.$vnode&&this.$vnode.ssrContext||// stateful
this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,a||"undefined"==typeof __VUE_SSR_CONTEXT__||(a=__VUE_SSR_CONTEXT__),b&&b.call(this,i(a)),a&&a._registeredComponents&&a._registeredComponents.add(f)},k._ssrRegister=l):b&&(l=g?function(a){b.call(this,j(a,this.$root.$options.shadowRoot))}:function(a){b.call(this,h(a))}),l)if(k.functional){// register for functional component in vue file
const a=k.render;k.render=function(b,c){return l.call(c),a(b,c)}}else{// inject component registration as beforeCreate hook
const a=k.beforeCreate;k.beforeCreate=a?[].concat(a,l):[l]}return c}const isOldIE="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function createInjector(){return(a,b)=>addStyle(a,b)}let HEAD;const styles={};function addStyle(a,b){const c=isOldIE?b.media||"default":a,d=styles[c]||(styles[c]={ids:new Set,styles:[]});if(!d.ids.has(a)){d.ids.add(a);let c=b.source;if(b.map&&(c+="\n/*# sourceURL="+b.map.sources[0]+" */",c+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(b.map))))+" */"),d.element||(d.element=document.createElement("style"),d.element.type="text/css",b.media&&d.element.setAttribute("media",b.media),void 0===HEAD&&(HEAD=document.head||document.getElementsByTagName("head")[0]),HEAD.appendChild(d.element)),"styleSheet"in d.element)d.styles.push(c),d.element.styleSheet.cssText=d.styles.filter(Boolean).join("\n");else{const a=d.ids.size-1,b=document.createTextNode(c),e=d.element.childNodes;e[a]&&d.element.removeChild(e[a]),e.length?d.element.insertBefore(b,e[a]):d.element.appendChild(b)}}}/* script */const __vue_script__=script;/* template */var __vue_render__=function(){var a=this,b=a.$createElement,c=a._self._c||b;return!!a.ssr||a.visible?c("div",{directives:[{name:"show",rawName:"v-show",value:!a.ssr||a.visible,expression:"ssr ? visible : true"}],staticClass:"vfm"},[c("transition",{attrs:{name:a.overlayTransition},on:{"before-enter":a.beforeOverlayEnter,"after-enter":a.afterOverlayEnter,"before-leave":a.beforeOverlayLeave,"after-leave":a.afterOverlayLeave}},[c("div",{directives:[{name:"show",rawName:"v-show",value:!a.hideOverlay&&a.visibility.overlay,expression:"!hideOverlay && visibility.overlay"}],staticClass:"vfm__overlay",class:[{"vfm__overlay--attach":"body"!==a.attach},{"vfm__overlay--prevent-click":a.preventClick},a.overlayClass],style:{zIndex:a.zIndex}})]),a._v(" "),c("transition",{attrs:{name:a.transition},on:{"before-enter":a.beforeModalEnter,"after-enter":a.afterModalEnter,"before-leave":a.beforeModalLeave,"after-leave":a.afterModalLeave}},[c("div",{directives:[{name:"show",rawName:"v-show",value:a.visibility.modal,expression:"visibility.modal"}],staticClass:"vfm__container",class:[{"vfm__container--attach":"body"!==a.attach,"vfm__container--prevent-click":a.preventClick},a.classes],style:{zIndex:a.zIndex},on:{click:function(){a.clickToClose&&a.$emit("input",!1)}}},[a._t("content-before"),a._v(" "),a._t("content",[c("div",{ref:"vfmContent",staticClass:"vfm__content",class:a.contentClass,on:{click:function(a){a.stopPropagation()}}},[a._t("default")],2)]),a._v(" "),a._t("content-after")],2)])],1):a._e()},__vue_staticRenderFns__=[];/* style */const __vue_inject_styles__=function(a){a&&a("data-v-3c6e49e8_0",{source:".vfm__overlay[data-v-3c6e49e8]{position:fixed;top:0;left:0;bottom:0;right:0;background-color:rgba(0,0,0,.5)}.vfm__overlay--attach[data-v-3c6e49e8]{position:absolute;width:100%;height:100%}.vfm__overlay--prevent-click[data-v-3c6e49e8]{pointer-events:none}.vfm__container[data-v-3c6e49e8]{position:fixed;top:0;left:0;bottom:0;right:0}.vfm__container--attach[data-v-3c6e49e8]{position:absolute}.vfm__container--prevent-click[data-v-3c6e49e8]{pointer-events:none}.vfm__container--prevent-click .vfm__content[data-v-3c6e49e8]{pointer-events:auto}.vfm-enter-active[data-v-3c6e49e8],.vfm-leave-active[data-v-3c6e49e8]{transition:opacity .2s}.vfm-enter[data-v-3c6e49e8],.vfm-leave-to[data-v-3c6e49e8]{opacity:0}",map:void 0,media:void 0})},__vue_scope_id__="data-v-3c6e49e8",__vue_module_identifier__=void 0,__vue_is_functional_template__=!1,__vue_component__=/*#__PURE__*/normalizeComponent({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,!1,createInjector,void 0,void 0),VueFinalModal=__vue_component__;/* scoped */var index={install(a){a.component("VueFinalModal",VueFinalModal)},VueFinalModal};export default index;export{VueFinalModal};
