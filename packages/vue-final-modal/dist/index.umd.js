(function(k,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue"),require("@vueuse/core"),require("@vueuse/integrations/useFocusTrap")):typeof define=="function"&&define.amd?define(["exports","vue","@vueuse/core","@vueuse/integrations/useFocusTrap"],o):(k=typeof globalThis<"u"?globalThis:k||self,o(k.index={},k.Vue,k.VueUse,k.VueUseFocusTrap))})(this,function(k,o,L,we){"use strict";const be=e=>(...t)=>{e&&(e==null||e(...t),e=null)},j=()=>{};function X(e,t,n){return e>n?n:e<t?t:e}const K=e=>typeof e=="string";function J(e,t){var l;const n=((l=H(e,t))==null?void 0:l[0])||t;e.push(n)}function H(e,t){const n=e.indexOf(t);if(n!==-1)return e.splice(n,1)}function ne(e){return Object.entries(e)}const le={teleportTo:{type:[String,null,Boolean,Object],default:"body"},modalId:{type:[String,Number,Symbol],default:void 0},modelValue:{type:Boolean,default:void 0},displayDirective:{type:String,default:"if",validator:e=>["if","show","visible"].includes(e)},hideOverlay:{type:Boolean,default:void 0},overlayBehavior:{type:String,default:"auto",validator:e=>["auto","persist"].includes(e)},overlayTransition:{type:[String,Object],default:void 0},contentTransition:{type:[String,Object],default:void 0},overlayClass:{type:void 0,default:void 0},contentClass:{type:void 0,default:void 0},overlayStyle:{type:[String,Object,Array],default:void 0},contentStyle:{type:[String,Object,Array],default:void 0},clickToClose:{type:Boolean,default:!0},escToClose:{type:Boolean,default:!0},background:{type:String,default:"non-interactive",validator:e=>["interactive","non-interactive"].includes(e)},focusTrap:{type:[Boolean,Object],default:()=>({allowOutsideClick:!0})},lockScroll:{type:Boolean,default:!0},reserveScrollBarGap:{type:Boolean,default:!0},zIndexFn:{type:Function,default:({index:e})=>1e3+2*e},swipeToClose:{type:String,default:"none",validator:e=>["none","up","right","down","left"].includes(e)},threshold:{type:Number,default:0},showSwipeBanner:{type:Boolean,default:void 0},preventNavigationGestures:{type:Boolean,default:void 0}};function se(e=!1){const t=o.ref(e),n=o.ref(t.value?0:void 0);return[t,n,{beforeEnter(){n.value=1},afterEnter(){n.value=0},beforeLeave(){n.value=3},afterLeave(){n.value=2}}]}function Te(e,t){const{modelValueLocal:n,onEntering:l,onEnter:u,onLeaving:d,onLeave:a}=t,r=o.ref(n.value),[s,i,h]=se(r.value),[p,M,S]=se(r.value),B=o.computed(()=>typeof e.contentTransition=="string"?{name:e.contentTransition,appear:!0}:{appear:!0,...e.contentTransition}),V=o.computed(()=>typeof e.overlayTransition=="string"?{name:e.overlayTransition,appear:!0}:{appear:!0,...e.overlayTransition}),C=o.computed(()=>(e.hideOverlay||M.value===2)&&i.value===2);o.watch(C,g=>{g&&(r.value=!1)}),o.watch(i,g=>{if(g===1){if(!r.value)return;l==null||l()}else if(g===0){if(!r.value)return;u==null||u()}else g===3?d==null||d():g===2&&(a==null||a())});async function w(){r.value=!0,await o.nextTick(),s.value=!0,p.value=!0}function E(){s.value=!1,p.value=!1}return{visible:r,contentVisible:s,contentListeners:h,contentTransition:B,overlayVisible:p,overlayListeners:S,overlayTransition:V,enterTransition:w,leaveTransition:E}}function Se(e,t,n){const{vfmRootEl:l,vfmContentEl:u,visible:d,modelValueLocal:a}=n,r=o.ref();function s(){d.value&&e.escToClose&&(a.value=!1)}function i(p){r.value=p==null?void 0:p.target}function h(){var p;r.value===l.value&&(e.clickToClose?a.value=!1:((p=u.value)==null||p.focus(),t("clickOutside")))}return{onEsc:s,onMouseupRoot:h,onMousedown:i}}function ke(e,t,n){let l=!1;const{open:u,close:d}=n,a=o.ref(!1),r={get value(){return a.value},set value(i){s(i)}};function s(i){(i?u():d())?(a.value=i,i!==e.modelValue&&t("update:modelValue",i)):(l=!0,t("update:modelValue",!i),o.nextTick(()=>{l=!1}))}return o.watch(()=>e.modelValue,i=>{l||(r.value=!!i)}),{modelValueLocal:r}}function Me(e,t){if(e.focusTrap===!1)return{focus(){},blur(){}};const{focusEl:n}=t,{hasFocus:l,activate:u,deactivate:d}=we.useFocusTrap(n,e.focusTrap);function a(){requestAnimationFrame(()=>{u()})}function r(){l.value&&d()}return{focus:a,blur:r}}let Q=!1;if(typeof window<"u"){const e={get passive(){Q=!0}};window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}const re=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);let A=[],Y=!1,_={x:0,y:0},N={x:-1,y:-1},x,z,ee=null;const ie=(e,t)=>{if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const l=window.getComputedStyle(e)[`overflow${t==="y"?"Y":"X"}`],u=e[`scroll${t==="y"?"Height":"Width"}`],d=e[`client${t==="y"?"Height":"Width"}`];return["auto","scroll"].includes(l)&&u>d},ae=(e,t,n)=>{const l=e[`scroll${n==="y"?"Height":"Width"}`],u=e[`scroll${n==="y"?"Top":"Left"}`],d=e[`client${n==="y"?"Height":"Width"}`];return!(u===0&&t<0||u+d+t>=l&&t>0)},ge=e=>{const t=[];for(;e;){if(t.push(e),e.classList.contains("vfm"))return t;e=e.parentElement}return t},Be=e=>{const t=ge(e);for(const n of t)if(ie(n,"y")&&ae(n,-_.y,"y")||ie(n,"x")&&ae(n,-_.x,"x"))return!0;return!1},ce=e=>A.some(()=>Be(e)),U=e=>{const t=e||window.event;return ce(t.target)||t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)},Ce=e=>{if(z===void 0){const t=!!e&&e.reserveScrollBarGap===!0,n=window.innerWidth-document.documentElement.clientWidth;if(t&&n>0){const l=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);z=document.body.style.paddingRight,document.body.style.paddingRight=`${l+n}px`}}x===void 0&&(x=document.body.style.overflow,document.body.style.overflow="hidden")},Ve=()=>{z!==void 0&&(document.body.style.paddingRight=z,z=void 0),x!==void 0&&(document.body.style.overflow=x,x=void 0)},Ee=(e,t)=>{if(e){const n=e[`scroll${t==="y"?"Height":"Width"}`],l=e[`scroll${t==="y"?"Top":"Left"}`],u=e[`client${t==="y"?"Height":"Width"}`];return n-l<=u}return!1},Oe=(e,t,n)=>{const l=e.targetTouches[0];_={x:l.clientX-N.x,y:l.clientY-N.y};const u=N[n],d=t&&t[`scroll${n==="y"?"Top":"Left"}`],a=(n==="y"?l.clientY:l.clientX)-u;return ce(e.target)?!1:t&&d===0&&a>0||Ee(t,n)&&a<0?U(e):(e.stopPropagation(),!0)},Le=(e,t)=>{if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(A.some(l=>l.targetElement===e))return;const n={targetElement:e,options:t||{}};A=[...A,n],re?(e.ontouchstart=l=>{l.targetTouches.length===1&&(N={x:l.targetTouches[0].clientX,y:l.targetTouches[0].clientY})},e.ontouchmove=l=>{if(l.targetTouches.length===1){if(!ee){const u=Math.abs(N.x-l.targetTouches[0].clientX),d=Math.abs(N.y-l.targetTouches[0].clientY);ee=u>d?"x":"y"}Oe(l,e,ee)}},Y||(document.addEventListener("touchmove",U,Q?{passive:!1}:void 0),Y=!0)):Ce(t)},Pe=e=>{if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}A=A.filter(t=>t.targetElement!==e),re?(e.ontouchstart=null,e.ontouchmove=null,Y&&A.length===0&&(document.removeEventListener("touchmove",U,Q?{passive:!1}:void 0),Y=!1)):A.length||Ve()};function De(e,t){const{lockScrollEl:n,modelValueLocal:l}=t;let u;o.watch(n,r=>{r&&(u=r)},{immediate:!0}),o.watch(()=>e.lockScroll,r=>{r?a():d()}),o.onBeforeUnmount(()=>{d()});function d(){u&&Pe(u)}function a(){l.value&&e.lockScroll&&u&&Le(u,{reserveScrollBarGap:e.reserveScrollBarGap,allowTouchMove:r=>{for(;r&&r!==document.body;){if(r.getAttribute("vfm-scroll-lock-ignore")!==null)return!0;r=r.parentElement}return!1}})}return{enableBodyScroll:d,disableBodyScroll:a}}function Ae(e){const t=o.ref();function n(u){var d;t.value=(d=e.zIndexFn)==null?void 0:d.call(e,{index:u<=-1?0:u})}function l(){t.value=void 0}return{zIndex:t,refreshZIndex:n,resetZIndex:l}}const oe={beforeMount(e,{value:t},{transition:n}){e._vov=e.style.visibility==="hidden"?"":e.style.visibility,n&&t?n.beforeEnter(e):W(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:l}){!t!=!n&&(l?t?(l.beforeEnter(e),W(e,!0),l.enter(e)):l.leave(e,()=>{W(e,!1)}):W(e,t))},beforeUnmount(e,{value:t}){W(e,t)}};function W(e,t){e.style.visibility=t?e._vov:"hidden"}const ue=e=>{if(e instanceof MouseEvent){const{clientX:t,clientY:n}=e;return{x:t,y:n}}else{const{clientX:t,clientY:n}=e.targetTouches[0];return{x:t,y:n}}};function Re(e){if(!e)return!1;let t=!1;const n={get passive(){return t=!0,!1}};return e.addEventListener("x",j,n),e.removeEventListener("x",j),t}function Ie(e,{threshold:t=0,onSwipeStart:n,onSwipe:l,onSwipeEnd:u,passive:d=!0}){const a=o.reactive({x:0,y:0}),r=o.reactive({x:0,y:0}),s=o.computed(()=>a.x-r.x),i=o.computed(()=>a.y-r.y),{max:h,abs:p}=Math,M=o.computed(()=>h(p(s.value),p(i.value))>=t),S=o.ref(!1),B=o.computed(()=>M.value?p(s.value)>p(i.value)?s.value>0?"left":"right":i.value>0?"up":"down":"none"),V=(v,m)=>{a.x=v,a.y=m},C=(v,m)=>{r.x=v,r.y=m};let w,E;function g(v){w.capture&&!w.passive&&v.preventDefault();const{x:m,y:I}=ue(v);V(m,I),C(m,I),n==null||n(v),E=[L.useEventListener(e,"mousemove",P,w),L.useEventListener(e,"touchmove",P,w),L.useEventListener(e,"mouseup",c,w),L.useEventListener(e,"touchend",c,w),L.useEventListener(e,"touchcancel",c,w)]}function P(v){const{x:m,y:I}=ue(v);C(m,I),!S.value&&M.value&&(S.value=!0),S.value&&(l==null||l(v))}function c(v){S.value&&(u==null||u(v,B.value)),S.value=!1,E.forEach(m=>m())}let b=[];return o.onMounted(()=>{const v=Re(window==null?void 0:window.document);d?w=v?{passive:!0}:{capture:!1}:w=v?{passive:!1,capture:!0}:{capture:!0},b=[L.useEventListener(e,"mousedown",g,w),L.useEventListener(e,"touchstart",g,w)]}),{isSwiping:S,direction:B,coordsStart:a,coordsEnd:r,lengthX:s,lengthY:i,stop:()=>{b.forEach(v=>v()),E.forEach(v=>v())}}}function Ne(e,t){const{vfmContentEl:n,modelValueLocal:l}=t,u=.1,d=300,a=o.ref(),r=o.computed(()=>{if(!(e.swipeToClose===void 0||e.swipeToClose==="none"))return e.showSwipeBanner?a.value:n.value}),s=o.ref(0),i=o.ref(!0);let h=j,p=!0,M,S=!1;const{lengthX:B,lengthY:V,direction:C,isSwiping:w}=Ie(r,{threshold:e.threshold,onSwipeStart(c){h=L.useEventListener(document,"selectionchange",()=>{var b;i.value=(b=window.getSelection())==null?void 0:b.isCollapsed}),M=new Date().getTime(),S=P(c==null?void 0:c.target)},onSwipe(){var c,b,O,v;if(S&&i.value&&C.value===e.swipeToClose){if(C.value==="up"){const m=X(Math.abs(V.value||0),0,((c=r.value)==null?void 0:c.offsetHeight)||0)-(e.threshold||0);s.value=m}else if(C.value==="down"){const m=X(Math.abs(V.value||0),0,((b=r.value)==null?void 0:b.offsetHeight)||0)-(e.threshold||0);s.value=-m}else if(C.value==="right"){const m=X(Math.abs(B.value||0),0,((O=r.value)==null?void 0:O.offsetWidth)||0)-(e.threshold||0);s.value=-m}else if(C.value==="left"){const m=X(Math.abs(B.value||0),0,((v=r.value)==null?void 0:v.offsetWidth)||0)-(e.threshold||0);s.value=m}}},onSwipeEnd(c,b){if(h(),!i.value){i.value=!0;return}const O=new Date().getTime(),v=b===e.swipeToClose,m=(()=>{var Z,q;if(b==="up"||b==="down")return Math.abs((V==null?void 0:V.value)||0)>u*(((Z=r.value)==null?void 0:Z.offsetHeight)||0);if(b==="left"||b==="right")return Math.abs((B==null?void 0:B.value)||0)>u*(((q=r.value)==null?void 0:q.offsetWidth)||0)})(),I=O-M<=d;if(p&&S&&v&&(m||I)){l.value=!1;return}s.value=0}}),E=o.computed(()=>{if(e.swipeToClose==="none")return;const c=(()=>{switch(e.swipeToClose){case"up":case"down":return"translateY";case"left":case"right":return"translateX"}})();return{class:{"vfm-bounce-back":!w.value},style:{transform:`${c}(${-s.value}px)`}}});o.watch(()=>i.value,c=>{c||(s.value=0)}),o.watch(()=>l.value,c=>{c&&(s.value=0)}),o.watch(()=>s.value,(c,b)=>{switch(e.swipeToClose){case"down":case"right":p=c<b;break;case"up":case"left":p=c>b;break}});function g(c){e.preventNavigationGestures&&c.preventDefault()}function P(c){const b=c==null?void 0:c.tagName;if(!b||["INPUT","TEXTAREA"].includes(b))return!1;const O=(()=>{switch(e.swipeToClose){case"up":return(c==null?void 0:c.scrollTop)+(c==null?void 0:c.clientHeight)===(c==null?void 0:c.scrollHeight);case"left":return(c==null?void 0:c.scrollLeft)+(c==null?void 0:c.clientWidth)===(c==null?void 0:c.scrollWidth);case"down":return(c==null?void 0:c.scrollTop)===0;case"right":return(c==null?void 0:c.scrollLeft)===0;default:return!1}})();return c===r.value?O:O&&P(c==null?void 0:c.parentElement)}return{vfmContentEl:n,swipeBannerEl:a,bindSwipe:E,onTouchStartSwipeBanner:g}}const de=Symbol("vfm");let R;const Fe=e=>R=e,$e={install:j,modals:[],openedModals:[],openedModalOverlays:[],dynamicModals:[],modalsContainers:o.ref([]),get:()=>{},toggle:()=>{},open:()=>{},close:()=>{},closeAll:()=>Promise.allSettled([])},je=()=>o.getCurrentInstance()&&o.inject(de,$e)||R;function He(){const e=o.shallowReactive([]),t=o.shallowReactive([]),n=o.shallowReactive([]),l=o.shallowReactive([]),u=o.ref([]),d=o.markRaw({install(a){a.provide(de,d),a.config.globalProperties.$vfm=d},modals:e,openedModals:t,openedModalOverlays:n,dynamicModals:l,modalsContainers:u,get(a){return e.find(r=>{var s,i;return((i=(s=F(r))==null?void 0:s.value.modalId)==null?void 0:i.value)===a})},toggle(a,r){var i;const s=d.get(a);return(i=F(s))==null?void 0:i.value.toggle(r)},open(a){return d.toggle(a,!0)},close(a){return d.toggle(a,!1)},closeAll(){return Promise.allSettled(t.reduce((a,r)=>{const s=F(r),i=s==null?void 0:s.value.toggle(!1);return i&&a.push(i),a},[]))}});return Fe(d),d}function F(e){var t;return(t=e==null?void 0:e.exposed)==null?void 0:t.modalExposed}const xe=o.defineComponent({inheritAttrs:!1}),fe=o.defineComponent({...xe,__name:"VueFinalModal",props:le,emits:["update:modelValue","beforeOpen","opened","beforeClose","closed","clickOutside"],setup(e,{expose:t,emit:n}){const l=e,u=n,d=o.useAttrs(),a=o.getCurrentInstance(),{modals:r,openedModals:s,openedModalOverlays:i}=$(),h=o.ref(),p=o.ref(),{focus:M,blur:S}=Me(l,{focusEl:h}),{zIndex:B,refreshZIndex:V,resetZIndex:C}=Ae(l),{modelValueLocal:w}=ke(l,u,{open:eo,close:oo}),{enableBodyScroll:E,disableBodyScroll:g}=De(l,{lockScrollEl:h,modelValueLocal:w});let P=j;const{visible:c,contentVisible:b,contentListeners:O,contentTransition:v,overlayVisible:m,overlayListeners:I,overlayTransition:Z,enterTransition:q,leaveTransition:qe}=Te(l,{modelValueLocal:w,onEntering(){o.nextTick(()=>{g(),M()})},onEnter(){u("opened"),P("opened")},onLeave(){H(s,a),C(),E(),u("closed"),P("closed")}}),{onEsc:Ke,onMouseupRoot:Je,onMousedown:ve}=Se(l,u,{vfmRootEl:h,vfmContentEl:p,visible:c,modelValueLocal:w}),{swipeBannerEl:Qe,bindSwipe:_e,onTouchStartSwipeBanner:ye}=Ne(l,{vfmContentEl:p,modelValueLocal:w}),me=o.computed(()=>a?s.indexOf(a):-1);o.watch([()=>l.zIndexFn,me],()=>{c.value&&V(me.value)}),o.onMounted(()=>{J(r,a)}),l.modelValue&&(w.value=!0);function eo(){let f=!1;return u("beforeOpen",{stop:()=>f=!0}),f?!1:(J(s,a),J(i,a),te(),q(),!0)}function oo(){let f=!1;return u("beforeClose",{stop:()=>f=!0}),f?!1:(H(i,a),te(),S(),qe(),!0)}function to(){w.value=!1}o.onBeforeUnmount(()=>{E(),H(r,a),H(s,a),S(),te()});async function te(){await o.nextTick();const f=i.filter(y=>{var D;const T=F(y);return(T==null?void 0:T.value.overlayBehavior.value)==="auto"&&!((D=T==null?void 0:T.value.hideOverlay)!=null&&D.value)});f.forEach((y,T)=>{const D=F(y);D!=null&&D.value&&(D.value.overlayVisible.value=T===f.length-1)})}const no=o.toRef(()=>l.modalId),he=o.toRef(()=>l.hideOverlay),lo=o.toRef(()=>l.overlayBehavior),so=o.computed(()=>({modalId:no,hideOverlay:he,overlayBehavior:lo,overlayVisible:m,toggle(f){return new Promise(y=>{P=be(D=>y(D));const T=typeof f=="boolean"?f:!w.value;w.value=T})}}));return t({modalExposed:so}),(f,y)=>(o.openBlock(),o.createBlock(o.Teleport,{to:f.teleportTo?f.teleportTo:void 0,disabled:!f.teleportTo},[f.displayDirective!=="if"||o.unref(c)?o.withDirectives((o.openBlock(),o.createElementBlock("div",o.mergeProps({key:0},o.unref(d),{ref_key:"vfmRootEl",ref:h,class:["vfm vfm--fixed vfm--inset",{"vfm--prevent-none":f.background==="interactive"}],style:{zIndex:o.unref(B)},role:"dialog","aria-modal":"true",onKeydown:y[7]||(y[7]=o.withKeys(()=>o.unref(Ke)(),["esc"])),onMouseup:y[8]||(y[8]=o.withModifiers(()=>o.unref(Je)(),["self"])),onMousedown:y[9]||(y[9]=o.withModifiers(T=>o.unref(ve)(T),["self"]))}),[he.value?o.createCommentVNode("",!0):(o.openBlock(),o.createBlock(o.Transition,o.mergeProps({key:0},o.unref(Z),o.toHandlers(o.unref(I))),{default:o.withCtx(()=>[f.displayDirective!=="if"||o.unref(m)?o.withDirectives((o.openBlock(),o.createElementBlock("div",{key:0,class:o.normalizeClass(["vfm__overlay vfm--overlay vfm--absolute vfm--inset vfm--prevent-none",f.overlayClass]),style:o.normalizeStyle(f.overlayStyle),"aria-hidden":"true"},null,6)),[[o.vShow,f.displayDirective!=="show"||o.unref(m)],[o.unref(oe),f.displayDirective!=="visible"||o.unref(m)]]):o.createCommentVNode("",!0)]),_:1},16)),o.createVNode(o.Transition,o.mergeProps(o.unref(v),o.toHandlers(o.unref(O))),{default:o.withCtx(()=>[f.displayDirective!=="if"||o.unref(b)?o.withDirectives((o.openBlock(),o.createElementBlock("div",o.mergeProps({key:0,ref_key:"vfmContentEl",ref:p,class:["vfm__content vfm--outline-none",[f.contentClass,{"vfm--prevent-auto":f.background==="interactive"}]],style:f.contentStyle,tabindex:"0"},o.unref(_e),{onMousedown:y[6]||(y[6]=()=>o.unref(ve)())}),[o.renderSlot(f.$slots,"default",o.normalizeProps(o.guardReactiveProps({close:to}))),f.showSwipeBanner?(o.openBlock(),o.createElementBlock("div",{key:0,ref_key:"swipeBannerEl",ref:Qe,class:"vfm-swipe-banner-container",onTouchstart:y[2]||(y[2]=T=>o.unref(ye)(T))},[o.renderSlot(f.$slots,"swipe-banner",{},()=>[o.createElementVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:y[0]||(y[0]=T=>f.swipeToClose==="left"&&T.preventDefault())},null,32),o.createElementVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:y[1]||(y[1]=T=>f.swipeToClose==="right"&&T.preventDefault())},null,32)])],544)):!f.showSwipeBanner&&f.preventNavigationGestures?(o.openBlock(),o.createElementBlock("div",{key:1,class:"vfm-swipe-banner-container",onTouchstart:y[5]||(y[5]=T=>o.unref(ye)(T))},[o.createElementVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:y[3]||(y[3]=T=>f.swipeToClose==="left"&&T.preventDefault())},null,32),o.createElementVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:y[4]||(y[4]=T=>f.swipeToClose==="right"&&T.preventDefault())},null,32)],32)):o.createCommentVNode("",!0)],16)),[[o.vShow,f.displayDirective!=="show"||o.unref(b)],[o.unref(oe),f.displayDirective!=="visible"||o.unref(b)]]):o.createCommentVNode("",!0)]),_:3},16)],16)),[[o.vShow,f.displayDirective!=="show"||o.unref(c)],[o.unref(oe),f.displayDirective!=="visible"||o.unref(c)]]):o.createCommentVNode("",!0)],8,["to","disabled"]))}});function $(){const e=je();if(!e)throw new Error(`[Vue Final Modal]: getActiveVfm was called with no active Vfm. Did you forget to install vfm?
	const vfm = createVfm()
	app.use(vfm)
This will fail in production.`);return e}function pe(e,t=fe){const{component:n,slots:l,...u}=e,d=typeof l>"u"?{}:Object.fromEntries(ne(l).map(([a,r])=>K(r)?[a,r]:G(r)?[a,{...r,component:o.markRaw(r.component)}]:[a,o.markRaw(r)]));return{...u,component:o.markRaw(n||t),slots:d}}function ze(e){const t=o.reactive({id:Symbol("useModal"),modelValue:!!(e!=null&&e.defaultModelValue),resolveOpened:()=>{},resolveClosed:()=>{},attrs:{},...pe(e)});L.tryOnUnmounted(()=>{t!=null&&t.keepAlive||r()}),t.modelValue===!0&&(R?R==null||R.dynamicModals.push(t):o.nextTick(()=>{const s=$();s==null||s.dynamicModals.push(t)}));async function n(){let s;return R?s=R:(await o.nextTick(),s=$()),t.modelValue?Promise.resolve("[Vue Final Modal] modal is already opened."):(r(),t.modelValue=!0,s.dynamicModals.push(t),new Promise(i=>{t.resolveOpened=()=>i("opened")}))}function l(){return t.modelValue?(t.modelValue=!1,new Promise(s=>{t.resolveClosed=()=>s("closed")})):Promise.resolve("[Vue Final Modal] modal is already closed.")}function u(s){const{slots:i,...h}=pe(s,t.component);s.defaultModelValue!==void 0&&(t.defaultModelValue=s.defaultModelValue),(s==null?void 0:s.keepAlive)!==void 0&&(t.keepAlive=s==null?void 0:s.keepAlive),d(t,h),i&&ne(i).forEach(([p,M])=>{const S=t.slots[p];K(S)?t.slots[p]=M:G(S)&&G(M)?d(S,M):t.slots[p]=M})}function d(s,i){i.component&&(s.component=i.component),i.attrs&&a(s.attrs,i.attrs)}function a(s,i){return Object.entries(i).forEach(([h,p])=>{s[h]=p}),s}function r(){const s=$(),i=s.dynamicModals.indexOf(t);i!==-1&&s.dynamicModals.splice(i,1)}return{options:t,open:n,close:l,patchOptions:u,destroy:r}}function We(e){return e}function G(e){return typeof e=="object"&&e!==null?"component"in e:!1}function Xe(e,t){return Object.keys(t).reduce((n,l)=>(n[l]=e==null?void 0:e[l],n),{})}function Ye(e){return{"onUpdate:modelValue":t=>e==null?void 0:e("update:modelValue",t),onBeforeClose:t=>e==null?void 0:e("beforeClose",t),onClosed:()=>e==null?void 0:e("closed"),onBeforeOpen:t=>e==null?void 0:e("beforeOpen",t),onOpened:()=>e==null?void 0:e("opened"),onClickOutside:()=>e==null?void 0:e("clickOutside")}}function Ue(e){const{props:t,modalProps:n,emit:l}=e,u=o.computed(()=>Xe(t,n)),d=Ye(l),a=o.useAttrs();return o.computed(()=>({...u.value,...d,...a}))}const Ge=["innerHTML"],Ze=o.defineComponent({__name:"ModalsContainer",setup(e){const{modalsContainers:t,dynamicModals:n}=$(),l=Symbol("ModalsContainer"),u=o.computed(()=>{var r;return l===((r=t.value)==null?void 0:r[0])});t.value.push(l),o.onBeforeUnmount(()=>{t.value=t.value.filter(r=>r!==l)});function d(r){var s,i,h;(i=(s=n[r])==null?void 0:s.resolveClosed)==null||i.call(s),(h=n[r])!=null&&h.keepAlive||n.splice(r,1)}function a(r){var s,i;(i=(s=n[r])==null?void 0:s.resolveOpened)==null||i.call(s)}return(r,s)=>u.value?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(o.unref(n),(i,h)=>(o.openBlock(),o.createBlock(o.resolveDynamicComponent(i.component),o.mergeProps({key:i.id},{displayDirective:i!=null&&i.keepAlive?"show":void 0,...typeof i.attrs=="object"?i.attrs:{}},{modelValue:i.modelValue,"onUpdate:modelValue":p=>i.modelValue=p,onClosed:()=>d(h),onOpened:()=>a(h)}),o.createSlots({_:2},[o.renderList(i.slots,(p,M)=>({name:M,fn:o.withCtx(()=>[o.unref(K)(p)?(o.openBlock(),o.createElementBlock("div",{key:0,innerHTML:p},null,8,Ge)):o.unref(G)(p)?(o.openBlock(),o.createBlock(o.resolveDynamicComponent(p.component),o.normalizeProps(o.mergeProps({key:1},p.attrs)),null,16)):(o.openBlock(),o.createBlock(o.resolveDynamicComponent(p),{key:2}))])}))]),1040,["modelValue","onUpdate:modelValue","onClosed","onOpened"]))),128)):o.createCommentVNode("",!0)}});k.ModalsContainer=Ze,k.VueFinalModal=fe,k.createVfm=He,k.getModalExposed=F,k.useModal=ze,k.useModalSlot=We,k.useVfm=$,k.useVfmAttrs=Ue,k.vueFinalModalProps=le,Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});
