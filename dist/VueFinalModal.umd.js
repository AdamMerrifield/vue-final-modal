!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("vue")):"function"==typeof define&&define.amd?define(["vue"],n):(e="undefined"!=typeof globalThis?globalThis:e||self).VueFinalModal=n(e.Vue)}(this,(function(e){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var t=function(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE)},o=function(e,n){n&&t(e)&&(e.style[n]="")};var a={name:"VueFinalModal",props:{name:{type:String,default:null},modelValue:{type:Boolean,default:!1},ssr:{type:Boolean,default:!0},classes:{type:[String,Object,Array],default:""},overlayClass:{type:[String,Object,Array],default:""},contentClass:{type:[String,Object,Array],default:""},lockScroll:{type:Boolean,default:!0},hideOverlay:{type:Boolean,default:!1},clickToClose:{type:Boolean,default:!0},preventClick:{type:Boolean,default:!1},attach:{type:null,default:!1,validator:function(e){var t=n(e);return"boolean"===t||"string"===t||e.nodeType===Node.ELEMENT_NODE}},transition:{type:String,default:"vfm"},overlayTransition:{type:String,default:"vfm"},zIndexBase:{type:[String,Number],default:1e3},zIndex:{type:[Boolean,String,Number],default:!1}},emits:["update:modelValue","click-outside","before-open","opened","before-close","closed"],setup:function(n,a){var l=a.emit,r="enter",i="entering",d="leave",f="leavng",u=Symbol("vfm"),c=e.ref(null),v=e.ref(null),s=e.ref(null),m=e.inject("$vfm"),p=e.ref(null),y=e.ref(!1),b=e.reactive({modal:!1,overlay:!1}),h=e.ref(null),g=e.ref(null),S=e.computed((function(){return(n.hideOverlay||h.value===d)&&g.value===d})),M=e.computed((function(){return"boolean"==typeof n.zIndex?n.attach?"unset":n.zIndexBase+2*(p.value||0):n.zIndex}));function x(){return{uid:u,name:n.name,emit:l,vfmContent:v,getAttachElement:B,modalStackIndex:p,visibility:b,handleLockScroll:w,hideOverlay:n.hideOverlay}}function C(){if(n.modelValue){var t=B();if(t||!1===n.attach){!1!==n.attach&&t.appendChild(c.value);var o=m.openedModals.findIndex((function(e){return e.uid===u}));-1!==o&&m.openedModals.splice(o,1),m.openedModals.push(x()),p.value=m.openedModals.length-1,w(),m.openedModals.filter((function(e){return e.uid!==u})).forEach((function(e,n){e.getAttachElement()===t&&(e.modalStackIndex.value=n,e.visibility.overlay=!1)})),y.value=!0,e.nextTick((function(){b.overlay=!0,b.modal=!0}))}else!1!==t&&console.warn("Unable to locate target ".concat(n.attach))}}function k(){var e=m.openedModals.findIndex((function(e){return e.uid===u}));if(-1!==e&&m.openedModals.splice(e,1),m.openedModals.length>0){var t=m.openedModals[m.openedModals.length-1];t.handleLockScroll(),!t.hideOverlay&&(t.visibility.overlay=!0)}else n.lockScroll&&o(document.body,"overflow");b.overlay=!1,b.modal=!1}function w(){var e,a,l;n.modelValue&&(n.lockScroll?(e=document.body,l="hidden",(a="overflow")&&t(e)&&(e.style[a]=l)):o(document.body,"overflow"))}function B(){return!1!==n.attach&&("string"==typeof n.attach?!!window&&window.document.querySelector(n.attach):n.attach)}return e.watch((function(){return n.modelValue}),(function(e){C(),e||k()})),e.watch((function(){return n.lockScroll}),w),e.watch((function(){return n.hideOverlay}),(function(e){n.modelValue&&!e&&(b.overlay=!0)})),e.watch((function(){return n.attach}),C),e.watch(S,(function(e){e&&(y.value=!1)}),{flush:"post"}),m.modals.push(x()),e.onMounted((function(){C()})),e.onBeforeUnmount((function(){k(),c.value.remove();var e=m.modals.findIndex((function(e){return e.uid===u}));m.openedModals.splice(e,1)})),{root:c,vfmContent:v,vfmContainer:s,visible:y,visibility:b,calculateZIndex:M,beforeOverlayEnter:function(){h.value=i},afterOverlayEnter:function(){h.value=r},beforeOverlayLeave:function(){h.value=f},afterOverlayLeave:function(){h.value=d},beforeModalEnter:function(){l("before-open"),g.value=i},afterModalEnter:function(){g.value=r,s.value.focus(),l("opened")},beforeModalLeave:function(){l("before-close"),g.value=f},afterModalLeave:function(){g.value=d,p.value=null,l("closed")},onClickContainer:function(){l("click-outside"),n.clickToClose&&l("update:modelValue",!1)}}}};const l=e.withScopeId("data-v-2836fdb5"),r=l((function(n,t,o,a,r,i){return o.ssr||a.visible?e.withDirectives((e.openBlock(),e.createBlock("div",{key:0,ref:"root",style:{zIndex:a.calculateZIndex},class:["vfm vfm--inset",[!1===o.attach?"vfm--fixed":"vfm--absolute",{"vfm--prevent-none":o.preventClick}]]},[e.createVNode(e.Transition,{name:o.overlayTransition,"onBefore-enter":a.beforeOverlayEnter,"onAfter-enter":a.afterOverlayEnter,"onBefore-leave":a.beforeOverlayLeave,"onAfter-leave":a.afterOverlayLeave},{default:l((()=>[e.withDirectives(e.createVNode("div",{class:["vfm__overlay vfm--overlay vfm--absolute vfm--inset",o.overlayClass],"aria-expanded":a.visibility.overlay.toString()},null,10,["aria-expanded"]),[[e.vShow,!o.hideOverlay&&a.visibility.overlay]])])),_:1},8,["name","onBefore-enter","onAfter-enter","onBefore-leave","onAfter-leave"]),e.createVNode(e.Transition,{name:o.transition,"onBefore-enter":a.beforeModalEnter,"onAfter-enter":a.afterModalEnter,"onBefore-leave":a.beforeModalLeave,"onAfter-leave":a.afterModalLeave},{default:l((()=>[e.withDirectives(e.createVNode("div",{ref:"vfmContainer",class:["vfm__container vfm--absolute vfm--inset vfm--outline-none",[o.classes,{"vfm--cursor-pointer":o.clickToClose}]],"aria-expanded":a.visibility.modal.toString(),role:"dialog","aria-modal":"true",tabindex:"-1",onClick:t[2]||(t[2]=(...e)=>a.onClickContainer(...e))},[e.createVNode("div",{ref:"vfmContent",class:["vfm__content vfm--cursor-auto",[o.contentClass,{"vfm--prevent-auto":o.preventClick}]],onClick:t[1]||(t[1]=e.withModifiers((()=>{}),["stop"]))},[e.renderSlot(n.$slots,"default")],2)],10,["aria-expanded"]),[[e.vShow,a.visibility.modal]])])),_:3},8,["name","onBefore-enter","onAfter-enter","onBefore-leave","onAfter-leave"])],6)),[[e.vShow,!o.ssr||a.visible]]):e.createCommentVNode("v-if",!0)}));return function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===t&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}("\n.vfm--fixed[data-v-2836fdb5] {\n  position: fixed;\n}\n.vfm--absolute[data-v-2836fdb5] {\n  position: absolute;\n}\n.vfm--inset[data-v-2836fdb5] {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.vfm--overlay[data-v-2836fdb5] {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vfm--prevent-none[data-v-2836fdb5] {\n  pointer-events: none;\n}\n.vfm--prevent-auto[data-v-2836fdb5] {\n  pointer-events: auto;\n}\n.vfm--cursor-pointer[data-v-2836fdb5] {\n  cursor: pointer;\n}\n.vfm--cursor-auto[data-v-2836fdb5] {\n  cursor: auto;\n}\n.vfm--outline-none[data-v-2836fdb5]:focus {\n  outline: none;\n}\n.vfm-enter-active[data-v-2836fdb5],\n.vfm-leave-active[data-v-2836fdb5] {\n  transition: opacity 0.2s;\n}\n.vfm-enter-from[data-v-2836fdb5],\n.vfm-leave-to[data-v-2836fdb5] {\n  opacity: 0;\n}\n"),a.render=r,a.__scopeId="data-v-2836fdb5",a.__file="lib/VueFinalModal.vue",{install:function(e){if(!e.config.globalProperties.$vfm){var n=function(){var e;return function(){return e||(e={openedModals:[],modals:[],show:function(e){this.toggle(e,!0)},hide:function(e){this.toggle(e,!1)},hideAll:function(){this.openedModals.forEach((function(e){e.emit("update:modelValue",!1)}))},toggle:function(e,n){var t=this.modals.find((function(n){return n.name===e}));void 0!==t&&t.emit("update:modelValue",n)}}),e}}()();Object.defineProperty(e.config.globalProperties,"$vfm",{get:function(){return n}}),e.provide("$vfm",n),e.component("VueFinalModal",a)}}}}));
