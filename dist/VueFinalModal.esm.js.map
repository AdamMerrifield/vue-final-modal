{"version":3,"file":"VueFinalModal.esm.js","sources":["../lib/utils/focusTrap.js","../lib/VueFinalModal.vue","../node_modules/style-inject/dist/style-inject.es.js","../lib/utils/dom.js","../lib/PluginCore.js","../lib/utils/errors.js","../node_modules/is-mobile/index.js","../lib/Plugin.js"],"sourcesContent":["// stolen from vue-js-modal\n\nconst FOCUSABLE_ELEMENTS_QUERY =\n  'button:not([disabled]), ' +\n  'select:not([disabled]), ' +\n  'a[href]:not([disabled]), ' +\n  'area[href]:not([disabled]), ' +\n  '[contentEditable=\"\"]:not([disabled]), ' +\n  '[contentEditable=\"true\"]:not([disabled]), ' +\n  '[contentEditable=\"TRUE\"]:not([disabled]), ' +\n  'textarea:not([disabled]), ' +\n  'iframe:not([disabled]), ' +\n  'input:not([disabled]), ' +\n  'summary:not([disabled]), ' +\n  '[tabindex]:not([tabindex=\"-1\"])'\n\nconst isTabPressed = event => {\n  return event.key === 'Tab' || event.keyCode === 9\n}\n\nconst querySelectorAll = (element, selector) => {\n  return [...(element.querySelectorAll(selector) || [])]\n}\n\nconst queryFocusableElements = element => {\n  return querySelectorAll(element, FOCUSABLE_ELEMENTS_QUERY)\n}\n\nconst isFocused = element => {\n  return element == document.activeElement\n}\n\nconst isNothingFocused = () => {\n  return !document.activeElement\n}\n\nclass FocusTrap {\n  constructor() {\n    this.root = null\n    this.elements = []\n\n    this.onKeyDown = this.onKeyDown.bind(this)\n    this.enable = this.enable.bind(this)\n    this.disable = this.disable.bind(this)\n    this.firstElement = this.firstElement.bind(this)\n    this.lastElement = this.lastElement.bind(this)\n  }\n\n  lastElement() {\n    return this.elements[this.elements.length - 1] || null\n  }\n\n  firstElement() {\n    return this.elements[0] || null\n  }\n\n  onKeyDown(event) {\n    if (!isTabPressed(event)) {\n      return\n    }\n\n    // SHIFT + TAB\n    if (event.shiftKey) {\n      if (isFocused(this.firstElement())) {\n        this.lastElement().focus()\n        event.preventDefault()\n      }\n      return\n    }\n\n    // TAB\n    if (isNothingFocused() || isFocused(this.lastElement())) {\n      this.firstElement().focus()\n      event.preventDefault()\n      return\n    }\n  }\n\n  enabled() {\n    return !!this.root\n  }\n\n  enable(root) {\n    if (!root) {\n      return\n    }\n\n    this.root = root\n    this.elements = queryFocusableElements(this.root)\n\n    this.root.addEventListener('keydown', this.onKeyDown)\n  }\n\n  disable() {\n    this.root.removeEventListener('keydown', this.onKeyDown)\n    this.root = null\n  }\n}\n\nexport default FocusTrap\n","<template>\n  <div\n    v-if=\"ssr || visible\"\n    v-show=\"!ssr || visible\"\n    ref=\"root\"\n    :style=\"bindStyle\"\n    class=\"vfm vfm--inset\"\n    :class=\"[attach === false ? 'vfm--fixed' : 'vfm--absolute', { 'vfm--prevent-none': preventClick }]\"\n    @keydown=\"onEsc\"\n  >\n    <transition\n      :name=\"overlayTransition\"\n      @before-enter=\"beforeOverlayEnter\"\n      @after-enter=\"afterOverlayEnter\"\n      @before-leave=\"beforeOverlayLeave\"\n      @after-leave=\"afterOverlayLeave\"\n    >\n      <div\n        v-if=\"!hideOverlay && visibility.overlay\"\n        class=\"vfm__overlay vfm--overlay vfm--absolute vfm--inset\"\n        :class=\"overlayClass\"\n        :style=\"overlayStyle\"\n      ></div>\n    </transition>\n    <transition\n      :name=\"transition\"\n      @before-enter=\"beforeModalEnter\"\n      @after-enter=\"afterModalEnter\"\n      @before-leave=\"beforeModalLeave\"\n      @after-leave=\"afterModalLeave\"\n    >\n      <div\n        v-show=\"visibility.modal\"\n        ref=\"vfmContainer\"\n        class=\"vfm__container vfm--absolute vfm--inset vfm--outline-none\"\n        :class=\"classes\"\n        :style=\"styles\"\n        :aria-expanded=\"visibility.modal.toString()\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        tabindex=\"-1\"\n        @click.self=\"onClickContainer\"\n      >\n        <div\n          ref=\"vfmContent\"\n          class=\"vfm__content\"\n          :class=\"[contentClass, { 'vfm--prevent-auto': preventClick }]\"\n          :style=\"contentStyle\"\n        >\n          <slot :params=\"params\" />\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script setup=\"props, { emit }\">\nimport { ref, reactive, onMounted, onBeforeUnmount, computed, nextTick, watch, inject } from 'vue'\nimport FocusTrap from './utils/focusTrap.js'\n\nconst TransitionState = {\n  Enter: 'enter',\n  Entering: 'entering',\n  Leave: 'leave',\n  Leaving: 'leavng'\n}\n\nexport default {\n  name: 'VueFinalModal',\n  props: {\n    name: { type: String, default: null },\n    modelValue: { type: Boolean, default: false },\n    ssr: { type: Boolean, default: true },\n    classes: { type: [String, Object, Array], default: '' },\n    overlayClass: { type: [String, Object, Array], default: '' },\n    contentClass: { type: [String, Object, Array], default: '' },\n    styles: { type: [String, Object, Array], default: '' },\n    overlayStyle: { type: [String, Object, Array], default: '' },\n    contentStyle: { type: [String, Object, Array], default: '' },\n    lockScroll: { type: Boolean, default: true },\n    hideOverlay: { type: Boolean, default: false },\n    clickToClose: { type: Boolean, default: true },\n    escToClose: { type: Boolean, default: false },\n    preventClick: { type: Boolean, default: false },\n    attach: {\n      type: null,\n      default: false,\n      validator(val) {\n        const type = typeof val\n\n        if (type === 'boolean' || type === 'string') return true\n\n        return val.nodeType === Node.ELEMENT_NODE\n      }\n    },\n    transition: { type: String, default: 'vfm' },\n    overlayTransition: { type: String, default: 'vfm' },\n    zIndexAuto: { type: Boolean, default: true },\n    zIndexBase: { type: [String, Number], default: 1000 },\n    zIndex: { type: [Boolean, String, Number], default: false },\n    focusRetain: { type: Boolean, default: true },\n    focusTrap: { type: Boolean, default: false }\n  },\n  emits: ['update:modelValue', 'click-outside', 'before-open', 'opened', 'before-close', 'closed']\n}\n\nconst uid = Symbol('vfm')\nexport const root = ref(null)\nexport const vfmContent = ref(null)\nexport const vfmContainer = ref(null)\n\nconst $vfm = inject(props.options.key)\n\nconst modalStackIndex = ref(null)\nconst $focusTrap = new FocusTrap()\n\nexport const visible = ref(false)\nexport const visibility = reactive({\n  modal: false,\n  overlay: false\n})\nconst overlayTransitionState = ref(null)\nconst modalTransitionState = ref(null)\nconst _stopEvent = ref(false)\nexport const params = ref({})\n\nconst isComponentReadyToBeDestroyed = computed(() => {\n  return (\n    (props.hideOverlay || overlayTransitionState.value === TransitionState.Leave) &&\n    modalTransitionState.value === TransitionState.Leave\n  )\n})\n\nexport const calculateZIndex = computed(() => {\n  if (props.zIndex === false) {\n    if (props.zIndexAuto) {\n      return props.zIndexBase + 2 * (modalStackIndex.value || 0)\n    } else {\n      return false\n    }\n  } else {\n    return props.zIndex\n  }\n})\n\nexport const bindStyle = computed(() => {\n  return {\n    ...(calculateZIndex.value !== false && { zIndex: calculateZIndex.value })\n  }\n})\n\nwatch(\n  () => props.modelValue,\n  value => {\n    if (_stopEvent.value) {\n      _stopEvent.value = false\n      return\n    }\n    mounted()\n    if (!value) {\n      if (emitEvent('before-close', true)) {\n        return\n      }\n      close()\n    }\n  }\n)\nwatch(() => props.lockScroll, handleLockScroll)\nwatch(\n  () => props.hideOverlay,\n  value => {\n    if (props.modelValue && !value) {\n      visibility.overlay = true\n    }\n  }\n)\nwatch(() => props.attach, mounted)\nwatch(\n  isComponentReadyToBeDestroyed,\n  val => {\n    if (val) {\n      visible.value = false\n    }\n  },\n  {\n    flush: 'post'\n  }\n)\n\n$vfm.modals.push(getModalInfo())\n\nonMounted(() => {\n  mounted()\n})\nonBeforeUnmount(() => {\n  close()\n  root.value.remove()\n\n  let index = $vfm.modals.findIndex(vm => vm.uid === uid)\n  $vfm.modals.splice(index, 1)\n})\nfunction getModalInfo() {\n  return {\n    uid,\n    props,\n    emit,\n    vfmContainer,\n    vfmContent,\n    getAttachElement,\n    modalStackIndex,\n    visibility,\n    handleLockScroll,\n    $focusTrap,\n    toggle\n  }\n}\nfunction mounted() {\n  if (props.modelValue) {\n    let target = getAttachElement()\n    if (target || props.attach === false) {\n      props.attach !== false && target.appendChild(root.value)\n\n      modalStackIndex.value = $vfm.openedModals.length - 1\n\n      handleLockScroll()\n\n      $vfm.openedModals\n        .filter(vm => vm.uid !== uid)\n        .forEach((vm, index) => {\n          if (vm.getAttachElement() === target) {\n            // if vm and this have the same attach element\n            vm.modalStackIndex.value = index\n            vm.visibility.overlay = false\n          }\n        })\n\n      if (emitEvent('before-open', false)) {\n        return\n      }\n\n      visible.value = true\n      nextTick(() => {\n        startTransitionEnter()\n      })\n    } else if (target !== false) {\n      console.warn('Unable to locate target '.concat(props.attach))\n    }\n  }\n}\nfunction close() {\n  if ($vfm.openedModals.length > 0) {\n    // If there are still nested modals opened\n    const $_vm = $vfm.openedModals[$vfm.openedModals.length - 1]\n    $_vm.handleLockScroll()\n    $_vm.props.focusTrap && $_vm.$focusTrap.firstElement().focus()\n    if ($_vm.props.focusRetain || $_vm.props.focusTrap) {\n      $_vm.vfmContainer.value.focus()\n    }\n    !$_vm.props.hideOverlay && ($_vm.visibility.overlay = true)\n  }\n  startTransitionLeave()\n}\nfunction handleLockScroll() {\n  if (props.modelValue) {\n    props.lockScroll ? $vfm.lockScroll() : $vfm.unlockScroll()\n  }\n}\nfunction getAttachElement() {\n  let target\n  if (props.attach === false) {\n    target = false\n  } else if (typeof props.attach === 'string') {\n    // CSS selector\n    if (window) {\n      target = window.document.querySelector(props.attach)\n    } else {\n      target = false\n    }\n  } else {\n    // DOM Element\n    target = props.attach\n  }\n  return target\n}\nfunction startTransitionEnter() {\n  visibility.overlay = true\n  visibility.modal = true\n}\nfunction startTransitionLeave() {\n  visibility.overlay = false\n  visibility.modal = false\n}\n\nexport function beforeOverlayEnter() {\n  overlayTransitionState.value = TransitionState.Entering\n}\nexport function afterOverlayEnter() {\n  overlayTransitionState.value = TransitionState.Enter\n}\nexport function beforeOverlayLeave() {\n  overlayTransitionState.value = TransitionState.Leaving\n}\nexport function afterOverlayLeave() {\n  overlayTransitionState.value = TransitionState.Leave\n}\nexport function beforeModalEnter() {\n  modalTransitionState.value = TransitionState.Entering\n}\nexport function afterModalEnter() {\n  modalTransitionState.value = TransitionState.Enter\n  if (props.focusRetain || props.focusTrap) {\n    vfmContainer.value.focus()\n  }\n  if (props.focusTrap) {\n    $focusTrap.enable(vfmContainer.value)\n  }\n  emit('opened', createModalEvent({ type: 'opened' }))\n}\nexport function beforeModalLeave() {\n  modalTransitionState.value = TransitionState.Leaving\n\n  if ($focusTrap.enabled()) {\n    $focusTrap.disable()\n  }\n}\nexport function afterModalLeave() {\n  modalTransitionState.value = TransitionState.Leave\n  modalStackIndex.value = null\n  if ($vfm.openedModals.length === 0) {\n    props.lockScroll && $vfm.unlockScroll()\n  }\n\n  let stopEvent = false\n  const event = createModalEvent({\n    type: 'closed',\n    stop() {\n      stopEvent = true\n    }\n  })\n  emit('closed', event)\n  if (stopEvent) return\n  params.value = {}\n}\nexport function onClickContainer() {\n  emit('click-outside', createModalEvent({ type: 'click-outside' }))\n  props.clickToClose && emit('update:modelValue', false)\n}\nexport function onEsc(evt) {\n  if (evt.keyCode === 27 && visible.value && props.escToClose) {\n    emit('update:modelValue', false)\n  }\n}\nfunction createModalEvent(eventProps = {}) {\n  return {\n    ref: getModalInfo(),\n    ...eventProps\n  }\n}\nfunction emitEvent(eventType, value) {\n  let stopEvent = false\n  const event = createModalEvent({\n    type: eventType,\n    stop() {\n      stopEvent = true\n    }\n  })\n  emit(eventType, event)\n  if (stopEvent) {\n    _stopEvent.value = true\n    nextTick(() => {\n      emit('update:modelValue', value)\n    })\n    return true\n  }\n  return false\n}\nfunction toggle(show, _params) {\n  const value = typeof show === 'boolean' ? show : !props.modelValue\n  if (value && arguments.length === 2) {\n    params.value = _params\n  }\n  emit('update:modelValue', value)\n}\n</script>\n\n<style lang=\"css\" scoped>\n.vfm--fixed {\n  position: fixed;\n}\n.vfm--absolute {\n  position: absolute;\n}\n.vfm--inset {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.vfm--overlay {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vfm--prevent-none {\n  pointer-events: none;\n}\n.vfm--prevent-auto {\n  pointer-events: auto;\n}\n.vfm--outline-none:focus {\n  outline: none;\n}\n.vfm-enter-active,\n.vfm-leave-active {\n  transition: opacity 0.2s;\n}\n.vfm-enter-from,\n.vfm-leave-to {\n  opacity: 0;\n}\n</style>\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","// Stolen from bootstrap vue\n\n// Determine if an element is an HTML element\nexport const isElement = el => !!(el && el.nodeType === Node.ELEMENT_NODE)\n\n// Set an style property on an element\nexport const setStyle = (el, prop, value) => {\n  if (prop && isElement(el)) {\n    el.style[prop] = value\n  }\n}\n\n// Remove an style property from an element\nexport const removeStyle = (el, prop) => {\n  if (prop && isElement(el)) {\n    el.style[prop] = ''\n  }\n}\n","import VueFinalModal from './VueFinalModal.vue'\nimport { setStyle, removeStyle } from './utils/dom.js'\n\nfunction createVfm(options) {\n  let vfm\n\n  return function() {\n    vfm = {\n      show(name, ...args) {\n        this.toggle(name, true, ...args)\n      },\n      hide(name) {\n        this.toggle(name, false)\n      },\n      hideAll() {\n        this.openedModals.forEach(modal => {\n          modal.emit('update:modelValue', false)\n        })\n      },\n      toggle(name, ...args) {\n        const modal = this.get(name)\n        if (modal !== undefined) {\n          modal.toggle(...args)\n        }\n      },\n      isScrollLocked: false,\n      lockScroll() {\n        if (this.isScrollLocked) return\n        if (options.isMobile) {\n          setStyle(document.body, 'overflow', 'hidden')\n        } else {\n          window.addEventListener('wheel', this.lockScrollListener, { passive: false })\n        }\n        this.isScrollLocked = true\n      },\n      unlockScroll() {\n        if (options.isMobile) {\n          removeStyle(document.body, 'overflow')\n        } else {\n          window.removeEventListener('wheel', this.lockScrollListener)\n        }\n        this.isScrollLocked = false\n      },\n      lockScrollListener(e) {\n        e.preventDefault()\n      },\n      get(name) {\n        return this.modals.find(modal => modal.props.name === name)\n      },\n      get openedModals() {\n        return this.modals.filter(modal => modal.props.modelValue)\n      },\n      modals: []\n    }\n    return vfm\n  }\n}\n\nexport function bindPrototype(app, options) {\n  const vfm = createVfm(options)()\n  Object.defineProperty(app.config.globalProperties, options.key, {\n    get() {\n      return vfm\n    }\n  })\n  app.provide(options.key, vfm)\n}\n\nexport function registComponent(app, options) {\n  app.component(options.componentName, {\n    ...VueFinalModal,\n    props: { ...VueFinalModal.props, options: { type: Object, default: () => options } }\n  })\n}\n","export const DUPLICATE_PLUGIN_COMPONENT =\n  '[vue-final-modal] Duplicate registration API key and componentName of VueFinalModal.'\n\nexport const DUPLICATE_COMPONENT = '[vue-final-modal] Duplicate registration componentName of VueFinalModal.'\n","'use strict'\r\n\r\nmodule.exports = isMobile\r\nmodule.exports.isMobile = isMobile\r\nmodule.exports.default = isMobile\r\n\r\nvar mobileRE = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i\r\n\r\nvar tabletRE = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i\r\n\r\nfunction isMobile (opts) {\r\n  if (!opts) opts = {}\r\n  var ua = opts.ua\r\n  if (!ua && typeof navigator !== 'undefined') ua = navigator.userAgent\r\n  if (ua && ua.headers && typeof ua.headers['user-agent'] === 'string') {\r\n    ua = ua.headers['user-agent']\r\n  }\r\n  if (typeof ua !== 'string') return false\r\n\r\n  var result = opts.tablet ? tabletRE.test(ua) : mobileRE.test(ua)\r\n\r\n  if (\r\n    !result &&\r\n    opts.tablet &&\r\n    opts.featureDetect &&\r\n    navigator &&\r\n    navigator.maxTouchPoints > 1 &&\r\n    ua.indexOf('Macintosh') !== -1 &&\r\n    ua.indexOf('Safari') !== -1\r\n  ) {\r\n    result = true\r\n  }\r\n\r\n  return result\r\n}\r\n","import { bindPrototype, registComponent } from './PluginCore'\nimport { DUPLICATE_PLUGIN_COMPONENT, DUPLICATE_COMPONENT } from './utils/errors'\nimport mobile from 'is-mobile'\n\nconst defaultOptions = {\n  componentName: 'VueFinalModal',\n  key: '$vfm',\n  isMobile: mobile()\n}\n\nconst Plugin = () => ({\n  install(app, options) {\n    const _options = Object.assign({}, defaultOptions, options)\n    const isDuplicateKey = app.config.globalProperties[_options.key]\n    const isDuplicateComponent = app._context.components[_options.componentName]\n\n    if (isDuplicateComponent) {\n      console.warn(isDuplicateKey ? DUPLICATE_PLUGIN_COMPONENT : DUPLICATE_COMPONENT)\n    } else {\n      if (!isDuplicateKey) {\n        bindPrototype(app, _options)\n      }\n      registComponent(app, _options)\n    }\n  }\n})\n\nexport default Plugin\n"],"names":["queryFocusableElements","element","selector","querySelectorAll","isFocused","document","activeElement","FocusTrap","root","elements","onKeyDown","this","bind","enable","disable","firstElement","lastElement","length","event","key","keyCode","isTabPressed","shiftKey","focus","preventDefault","addEventListener","removeEventListener","name","props","type","String","default","modelValue","Boolean","ssr","classes","Object","Array","overlayClass","contentClass","styles","overlayStyle","contentStyle","lockScroll","hideOverlay","clickToClose","escToClose","preventClick","attach","validator","val","nodeType","Node","ELEMENT_NODE","transition","overlayTransition","zIndexAuto","zIndexBase","Number","zIndex","focusRetain","focusTrap","emits","TransitionState","uid","Symbol","ref","vfmContent","vfmContainer","$vfm","inject","options","modalStackIndex","$focusTrap","visible","visibility","reactive","modal","overlay","overlayTransitionState","modalTransitionState","_stopEvent","params","isComponentReadyToBeDestroyed","computed","value","calculateZIndex","bindStyle","getModalInfo","emit","getAttachElement","handleLockScroll","toggle","mounted","target","appendChild","openedModals","filter","vm","forEach","index","emitEvent","nextTick","console","warn","concat","close","$_vm","unlockScroll","window","querySelector","createModalEvent","eventProps","eventType","stopEvent","stop","show","_params","arguments","watch","flush","modals","push","onMounted","onBeforeUnmount","remove","findIndex","splice","enabled","evt","$props","$setup","_createBlock","style","class","onKeydown","_createVNode","onBefore-enter","onAfter-enter","onBefore-leave","onAfter-leave","aria-expanded","toString","role","aria-modal","tabindex","onClick","_renderSlot","css","insertAt","head","getElementsByTagName","createElement","firstChild","insertBefore","styleSheet","cssText","createTextNode","isElement","el","createVfm","args","hide","hideAll","get","undefined","isScrollLocked","prop","isMobile","body","lockScrollListener","passive","e","find","mobileRE","tabletRE","opts","ua","navigator","userAgent","headers","result","tablet","test","featureDetect","maxTouchPoints","indexOf","defaultOptions","componentName","mobile","install","app","_options","assign","isDuplicateKey","config","globalProperties","_context","components","vfm","defineProperty","provide","bindPrototype","component","VueFinalModal","registComponent"],"mappings":"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"}